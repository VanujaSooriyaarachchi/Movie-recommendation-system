<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Check Out</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="../CSS/cart_style.css" />
  </head>
  <body>
    <!-- Form -->
    <div class="details" id="formdata">
      <h1 id="head">Personal Details</h1>
      <hr />
      <input type="text" id="firstname" placeholder="First name" />
      <input type="text" id="lastname" placeholder="Last name" />
      <input type="email" id="email" placeholder="E-mail" />
      <input type="tel" id="TPno" placeholder="0123456789" />
      <input type="text" id="del" placeholder="Delivery address" />
      <h1 id="head1" class="form">Payment Details</h1>
      <hr />
      <input type="text" id="cardname" placeholder="Name of card" />
      <input type="text" id="cardnumber" placeholder="1111-2222-3333-4444" />
      <input type="date" id="expyear" placeholder="Expiry Date (MM/YYYY)" />
      <input
        type="text"
        id="bill"
        placeholder="Another delivery address(If required)"
      />
      <input type="submit" value="Submit" onclick="displayMessage()" />
    </div>

    <script>
      function displayMessage() {
        alert("Thank you for submitting the form!");
      }

      function displayMessage() {
        var firstName = document.getElementById("firstname").value;
        var lastName = document.getElementById("lastname").value;
        var email = document.getElementById("email").value;
        var tpNo = document.getElementById("TPno").value;
        var del = document.getElementById("del").value;
        var cardName = document.getElementById("cardname").value;
        var cardNumber = document.getElementById("cardnumber").value;
        var expYear = document.getElementById("expyear").value;
        var bill = document.getElementById("bill").value;

        // Validate required fields
        if (
          firstname === "" ||
          lastname === "" ||
          email === "" ||
          cardname === ""
        ) {
          alert("Please fill in all required fields.");
          return;
        }

        if (firstName == "" || !/^[a-zA-Z]+$/.test(firstName)) {
          alert("Please enter a valid first name");
          return false;
        }

        if (lastName == "" || !/^[a-zA-Z]+$/.test(lastName)) {
          alert("Please enter a valid last name");
          return false;
        }

        if (email == "" || !/^\S+@\S+\.\S+$/.test(email)) {
          alert("Please enter a valid email address");
          return false;
        }

        if (tpNo == "" || !/^\d{10}$/.test(tpNo)) {
          alert("Please enter a valid telephone number");
          return false;
        }

        if (del == "") {
          alert("Please enter a valid delivery address");
          return false;
        }

        if (cardName == "" || !/^[a-zA-Z\s]+$/.test(cardName)) {
          alert("Please enter a valid name on card");
          return false;
        }

        if (cardNumber == "" || !/^\d{16}$/.test(cardNumber)) {
          alert("Please enter a valid card number");
          return false;
        }

        if (expYear == "" || !/^(0[1-9]|1[0-2])\/\d{4}$/.test(expYear)) {
          alert("Please enter a valid expiry date (mm/yyyy)");
          return false;
        }

        // Validate delivery address (if required)
        if (bill === "" && del === "") {
          alert(
            "Please fill in either the Delivery address or the Fill if delivery is not Billing field."
          );
          return;
        }

        // If all validations pass, display success message with user's first name
        alert(
          "Thank you!! " +
            firstName +
            " for your order. Your order has been successfully completed!!. Total: $" +
            bill
        );
      }
    </script>
  </body>
</html>
